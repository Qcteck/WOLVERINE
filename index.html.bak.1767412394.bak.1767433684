<!doctype html><html lang="fr"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>WOLVERINE</title><style>:root{--bg:#061027;--p:#0a1b3e;--p2:#0a2a66;--b:#1e4ea8;--t:#e8f2ff;--m:#9fb7e6;--ok:#86ffd0;--bad:#ff7b7b}*{box-sizing:border-box}html,body{margin:0;height:100%;background:radial-gradient(1100px 600px at 20% 0%,#0a1328 0%,transparent 60%),radial-gradient(900px 520px at 80% 20%,#101a33 0%,transparent 55%),var(--bg);color:var(--t);font:14px system-ui,-apple-system,Segoe UI,Roboto}#wrap{max-width:1200px;margin:18px auto;padding:0 14px}#bar{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:16px;background:linear-gradient(180deg,rgba(10,27,62,.92),rgba(10,42,102,.68));border:1px solid rgba(180,210,255,.18);box-shadow:0 10px 40px rgba(0,0,0,.35)}#logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#3aa0ff,#1b4cff);box-shadow:0 8px 20px rgba(0,0,0,.35)}#title{font-weight:800;letter-spacing:.6px}#sub{color:var(--m);font-size:12px;margin-top:2px}#topBtns{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}button,.pill{padding:8px 10px;border-radius:999px;background:rgba(10,27,62,.55);border:1px solid rgba(180,210,255,.18);color:var(--t);cursor:pointer;user-select:none}button:hover{border-color:rgba(180,210,255,.35)}button:active{transform:translateY(1px)}.primary{background:linear-gradient(135deg,#2a7bff,#1d4fff);border-color:rgba(200,230,255,.28)}.danger{background:linear-gradient(135deg,#ff4a4a,#b01010);border-color:rgba(255,190,190,.28)}.ok{background:linear-gradient(135deg,#1fe08d,#0a9b62);border-color:rgba(170,255,220,.28)}.ghost{opacity:.8}#grid{margin-top:14px;display:grid;grid-template-columns:1.05fr .95fr;gap:14px}#card,#console{border-radius:18px;background:linear-gradient(180deg,rgba(10,27,62,.78),rgba(10,42,102,.52));border:1px solid rgba(180,210,255,.18);box-shadow:0 10px 40px rgba(0,0,0,.28)}#card{padding:14px 14px 16px}#console{padding:14px}h3{margin:0 0 10px 0;font-size:14px;letter-spacing:.4px;color:var(--t)}.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0}label{display:block;color:var(--m);font-size:12px;margin:0 0 6px 4px}input,select{width:100%;padding:10px 12px;border-radius:14px;background:rgba(0,0,0,.18);border:1px solid rgba(180,210,255,.16);color:var(--t);outline:none}input:focus,select:focus{border-color:rgba(180,210,255,.35)}.col{flex:1;min-width:220px}.mini{min-width:160px}.kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}.box{padding:10px 12px;border-radius:14px;background:rgba(0,0,0,.14);border:1px solid rgba(180,210,255,.14)}.box b{display:block;font-size:12px;color:var(--m);font-weight:600}.box span{display:block;margin-top:4px;font-size:13px}#log{height:460px;overflow:auto;padding:10px 12px;border-radius:14px;background:rgba(0,0,0,.22);border:1px solid rgba(180,210,255,.14);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px;white-space:pre-wrap}#foot{margin-top:10px;color:var(--m);font-size:12px;display:flex;gap:12px;flex-wrap:wrap}#dot{display:inline-block;width:8px;height:8px;border-radius:99px;background:#666}#dot.ok{background:var(--ok)}#dot.bad{background:var(--bad)}@media(max-width:980px){#grid{grid-template-columns:1fr}}</style></head><body><div id="wrap"><div id="bar"><div id="logo"></div><div><div id="title">WOLVERINE</div><div id="sub">TraderOne • API • Refresh adaptatif • Monitoring TG</div></div><div id="topBtns"><button id="bApi" class="ghost">API</button><button id="bPing" class="ghost">Ping</button><button id="bRefresh" class="ghost">Refresh</button><button id="bStart" class="primary">Start</button><button id="bStop" class="danger">Stop</button></div></div><div id="grid"><div id="card"><h3>Control</h3><div class="row"><div class="col mini"><label>Wallet (Phantom)</label><div class="row" style="margin:0"><button id="bConnect" class="primary">Connect</button><button id="bDisconnect">Disconnect</button></div></div><div class="col"><label>Adresse Phantom</label><input id="addr" placeholder="non connecté" readonly></div></div><div class="kpi"><div class="box"><b>SOL</b><span id="sol">-</span></div><div class="box"><b>USDC</b><span id="usdc">-</span></div><div class="box"><b>Custody (TraderOne)</b><span id="cust">-</span></div></div><div class="row"><div class="col"><label>Budget (USDC)</label><input id="budget" inputmode="decimal" placeholder="ex: 50"></div><div class="col"><label>Mode</label><select id="mode"><option value="dca_sol">DCA buy SOL (safe)</option><option value="microcap_radar">Microcap radar (risk)</option><option value="manual_mint">Manual mint</option></select></div></div><div class="row"><div class="col"><label>Mint (si Manual token)</label><input id="mint" placeholder="SPL mint (solana)"></div><div class="col mini"><label>Auto refresh</label><select id="auto"><option value="on">ON</option><option value="off">OFF</option></select></div></div><div class="row"><div class="col" style="min-width:100%"><div style="color:var(--m);font-size:12px;line-height:1.35;padding:10px 12px;border-radius:14px;background:rgba(0,0,0,.12);border:1px solid rgba(180,210,255,.12)">Important: si tu actives le mode custodial côté backend, l'API utilisera la clé du serveur. Le frontend ici n'envoie pas de clé privée par défaut. Dépôt: envoie SOL/USDC vers l'adresse "Custody" affichée (si dispo).</div></div></div></div><div id="console"><h3>Console</h3><div id="log"></div><div id="foot"><span><i id="dot"></i> <span id="apiState">API: ?</span></span><span>Dernier refresh: <span id="last">-</span></span><span>Erreurs: <span id="errs">0</span></span><span>Latence: <span id="lat">-</span></span></div></div></div></div><script>
(()=>{const W=window;W.__WOLV__=W.__WOLV__||{S:{}};const API=(W.location.origin+("/wolverine/api")).replace(/\/+$/,"");const $=s=>document.querySelector(s);const logEl=$("#log"),dot=$("#dot"),apiState=$("#apiState");let errs=0,lastT=0,autoTimer=0;const now=()=>new Date().toISOString().replace("T"," ").replace("Z"," UTC");const log=(m)=>{logEl.textContent+=`[${now()}] ${m}\n`;logEl.scrollTop=logEl.scrollHeight};const setErr=()=>{$("#errs").textContent=String(++errs)};const setLat=(ms)=>{$("#lat").textContent=(ms>=0?`${ms}ms`:"-")};const setLast=()=>{$("#last").textContent=now()};const apiPing=async()=>{const t=performance.now();try{const r=await fetch(API+"/ping",{cache:"no-store"});const tx=await r.text();setLat(Math.round(performance.now()-t));dot.className=tx.trim()==="pong"?"ok":"bad";apiState.textContent="API: "+tx.trim();log("ping: "+tx.trim());return tx.trim()==="pong"}catch(e){setErr();dot.className="bad";apiState.textContent="API: ERR";log("ping error");return false}};const apiStatus=async()=>{const t=performance.now();try{const r=await fetch(API+"/status",{cache:"no-store"});setLat(Math.round(performance.now()-t));const j=await r.json().catch(async()=>({raw:await r.text()}));log("status: "+(j&&j.ok!==undefined?JSON.stringify(j):"ok"));setLast();return j}catch(e){setErr();log("status error");return null}};const apiPost=async(path,obj)=>{const t=performance.now();try{const r=await fetch(API+path,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(obj||{}),cache:"no-store"});setLat(Math.round(performance.now()-t));const txt=await r.text();let out=null;try{out=JSON.parse(txt)}catch(_){out={raw:txt}}return {ok:r.ok,status:r.status,data:out}}catch(e){setErr();return {ok:false,status:0,data:{err:"fetch"}}}};const phantom=()=>W.solana&&W.solana.isPhantom?W.solana:null;const setAddr=(a)=>{$("#addr").value=a||""};const connect=async()=>{try{const p=phantom();if(!p){log("Phantom introuvable");setErr();return}const res=await p.connect();const pk=res.publicKey?res.publicKey.toString():"";setAddr(pk);log("Phantom connecté");}catch(e){setErr();log("Phantom connect error")}};const disconnect=async()=>{try{const p=phantom();if(p&&p.disconnect) await p.disconnect();setAddr("");log("Phantom déconnecté")}catch(e){setErr();log("Phantom disconnect error")}};const start=async()=>{const budget=parseFloat(($("#budget").value||"").replace(",","."));const mode=$("#mode").value;const mint=$("#mint").value.trim();const pub=$("#addr").value.trim();const payload={budgetUsdc:isFinite(budget)?budget:0,mode,mint,phantomPubkey:pub,ts:Date.now()};const r=await apiPost("/start",payload);log("start: "+JSON.stringify({ok:r.ok,status:r.status,data:r.data&&r.data.ok!==undefined?r.data:{raw:r.data.raw?String(r.data.raw).slice(0,180):r.data}}));if(!r.ok) setErr()};const stop=async()=>{const r=await apiPost("/stop",{ts:Date.now()});log("stop: "+JSON.stringify({ok:r.ok,status:r.status,data:r.data&&r.data.ok!==undefined?r.data:{raw:r.data.raw?String(r.data.raw).slice(0,180):r.data}}));if(!r.ok) setErr()};const refresh=async()=>{await apiPing();await apiStatus()};const autoSet=()=>{clearInterval(autoTimer);autoTimer=0;if($("#auto").value==="on"){autoTimer=setInterval(()=>{refresh().catch(()=>0)},8000);}};$("#bPing").onclick=()=>apiPing();$("#bApi").onclick=()=>apiStatus();$("#bRefresh").onclick=()=>refresh();$("#bStart").onclick=()=>start();$("#bStop").onclick=()=>stop();$("#bConnect").onclick=()=>connect();$("#bDisconnect").onclick=()=>disconnect();$("#auto").onchange=()=>autoSet();W.addEventListener("load",()=>{log("front ready");autoSet();refresh().catch(()=>0);try{const p=phantom();if(p&&p.publicKey){setAddr(p.publicKey.toString())}}catch(_){}});})();
</script></body></html>
