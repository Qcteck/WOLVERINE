<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>WOLVERINE</title><style>:root{--bg:#070a14;--p:#0b1330;--p2:#09102a;--l:rgba(255,255,255,.14);--t:#e7f0ff;--m:#9fb3d7;--ok:#7dffb0;--bad:#ff7d7d;--w:rgba(120,170,255,.25)}*{box-sizing:border-box}html,body{margin:0;height:100%;background:radial-gradient(900px 500px at 30% 0%,#10245a 0%,transparent 60%),radial-gradient(700px 450px at 85% 20%,#0a2e7a 0%,transparent 55%),var(--bg);color:var(--t);font:14px system-ui}#wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:22px}#card{width:min(1080px,96vw);border:1px solid rgba(160,200,255,.22);border-radius:18px;background:linear-gradient(180deg,rgba(10,16,40,.72),rgba(6,10,25,.72));box-shadow:0 25px 70px rgba(0,0,0,.45);backdrop-filter:blur(8px);padding:16px 16px 14px}#top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}#brand{display:flex;align-items:center;gap:10px}#logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,#1b6cff,#00d4ff);box-shadow:0 10px 25px rgba(0,0,0,.35)}#title{font-weight:800;letter-spacing:.5px}#sub{color:var(--m);font-size:12px;margin-top:2px}#pills{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end} .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid rgba(160,200,255,.22);background:rgba(7,10,20,.55)} .dot{width:10px;height:10px;border-radius:50%;background:var(--bad);box-shadow:0 0 0 3px rgba(255,125,125,.18)} .dot.ok{background:var(--ok);box-shadow:0 0 0 3px rgba(125,255,176,.16)} .mini{font-size:12px;color:var(--m)} button,.btn{cursor:pointer;border:1px solid rgba(160,200,255,.22);background:rgba(7,10,20,.55);color:var(--t);padding:10px 12px;border-radius:12px;font-weight:650} button:hover{transform:translateY(-1px);border-color:rgba(200,230,255,.35)} button:disabled{opacity:.55;cursor:not-allowed;transform:none} input,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(160,200,255,.22);background:rgba(7,10,20,.55);color:var(--t);outline:none} input:focus,select:focus{border-color:rgba(200,230,255,.45)} #grid{display:grid;grid-template-columns:1.1fr 1.9fr;gap:12px} .box{border:1px solid rgba(160,200,255,.22);border-radius:16px;background:rgba(8,12,28,.55);padding:12px} .h{font-weight:800;margin-bottom:10px} .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap} .row>*{flex:1} .k{color:var(--m);font-size:12px;margin:8px 0 6px} #tbl{width:100%;border-collapse:collapse;table-layout:fixed} #tbl th,#tbl td{border-top:1px solid rgba(160,200,255,.18);padding:9px 8px;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis} #tbl th{color:var(--m);font-weight:700} #log{height:220px;overflow:auto;border-radius:12px;border:1px solid rgba(160,200,255,.18);background:rgba(7,10,20,.45);padding:10px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px;line-height:1.35} .oktxt{color:var(--ok)} .badtxt{color:var(--bad)} #foot{display:flex;justify-content:space-between;align-items:center;margin-top:10px;color:var(--m);font-size:12px} @media (max-width:920px){#grid{grid-template-columns:1fr}}</style></head><body><div id="wrap"><div id="card"><div id="top"><div id="brand"><div id="logo"></div><div><div id="title">WOLVERINE</div><div id="sub">Phantom only • Jupiter swaps • Budget protected</div></div></div><div id="pills"><div class="pill"><span id="apiDot" class="dot"></span><span id="apiTxt">API: offline</span></div><div class="pill"><span id="phDot" class="dot"></span><span id="phTxt">Phantom: disconnected</span></div><button id="langBtn" style="padding:8px 10px;border-radius:999px">EN</button></div></div><div id="grid"><div class="box"><div class="h">Control</div><div class="k">Wallet</div><div class="row"><button id="btnConnect">Connect</button><button id="btnDisc" disabled>Disconnect</button></div><div class="k">Balances</div><div class="row"><div class="pill" style="justify-content:space-between;gap:14px"><span class="mini">SOL</span><b id="balSol">-</b></div><div class="pill" style="justify-content:space-between;gap:14px"><span class="mini">USDC</span><b id="balUsdc">-</b></div></div><div class="k">Budget (USDC)</div><div class="row"><input id="budgetIn" inputmode="decimal" placeholder="Total budget (USDC)"/><button id="btnSaveBud">Save</button></div><div class="k">Mode</div><div class="row"><select id="modeSel"><option value="dca">DCA buy SOL (safe)</option></select></div><div class="k">Autotrade</div><div class="row"><button id="btnStart" disabled>Start WOLVERINE</button><button id="btnStop" disabled>Stop</button></div><div class="k">Safety</div><div class="mini">Never spends more than your budget. Each swap uses Phantom signature. No private keys stored.</div></div><div class="box"><div class="h">Trades</div><table id="tbl"><thead><tr><th style="width:160px">Time</th><th style="width:70px">Side</th><th style="width:120px">Pair</th><th style="width:100px">Qty</th><th style="width:90px">Status</th><th>Tx</th></tr></thead><tbody id="tb"></tbody></table><div style="height:10px"></div><div class="h" style="margin-top:6px">Log</div><div id="log"></div></div></div><div id="foot"><span id="hint">Ready.</span><span id="lang">lang: EN</span></div></div></div><script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.95.4/lib/index.iife.min.js"></script><script>(()=>{const __fetchTO=(u,o,ms)=>{try{ms=ms||2500;o=o||{};const c=new AbortController();const t=setTimeout(()=>c.abort(),ms);return fetch(u,Object.assign({},o,{signal:c.signal})).finally(()=>clearTimeout(t))}catch(e){return fetch(u,o||{})}};()=>{const $=id=>document.getElementById(id);const st={lang:(localStorage.getItem("wolv_lang")||"en").toLowerCase(),pub:null,conn:null,run:false,timer:null,spent:0,budget:0,mode:(localStorage.getItem("wolv_mode")||"dca"),lastUsdc:0};const dict={en:{api:"API:",on:"online",off:"offline",ph:"Phantom:",phok:"connected",phno:"not found",phnc:"not connected",connect:"Connect",disc:"Disconnect",save:"Save",start:"Start WOLVERINE",stop:"Stop",budph:"Total budget (USDC)",ready:"Ready.",need:"Connect Phantom and set budget.",badamt:"Invalid budget",nobud:"Budget is 0",low:"Remaining budget too low",swap:"swap",sig:"signature",fail:"FAIL",ok:"OK"},fr:{api:"API:",on:"en ligne",off:"hors-ligne",ph:"Phantom:",phok:"connecté",phno:"introuvable",phnc:"non connecté",connect:"Connecter",disc:"Déconnecter",save:"Sauver",start:"Start WOLVERINE",stop:"Stop",budph:"Budget total (USDC)",ready:"Prêt.",need:"Connecte Phantom et définis le budget.",badamt:"Montant invalide",nobud:"Budget = 0",low:"Budget restant trop bas",swap:"swap",sig:"signature",fail:"ERREUR",ok:"OK"}};const USDC_MINT="EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1";const SOL_MINT="So11111111111111111111111111111111111111112";const TOKEN_PROGRAM="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA";const RPC="https://lb.drpc.live/solana/Ah_pmhKMs0qntHMrHyHMTvqg8lcNcRkR8LWNEklbR4ac";const PROXIES=["https://bbtrader-jup.paycashnostory.workers.dev","https://bbbotrader.paycashnostory.workers.dev"];let PROXY=PROXIES[0];const now=()=>new Date().toISOString().replace("T"," ").slice(0,19);const log=(s,cls="")=>{const el=$("log");const line=document.createElement("div");line.textContent=`[${now()}] ${s}`;if(cls) line.className=cls;el.appendChild(line);el.scrollTop=el.scrollHeight;};const setApi=(ok)=>{$("apiDot").className="dot"+(ok?" ok":"");$("apiTxt").textContent=`${L().api} ${ok?L().on:L().off}`;};const setPh=(ok,msg)=>{$("phDot").className="dot"+(ok?" ok":"");$("phTxt").textContent=`${L().ph} ${msg}`;};const L=()=>dict[st.lang]||dict.en;const applyLang=()=>{const l=L();$("langBtn").textContent=st.lang.toUpperCase();$("lang").textContent="lang: "+st.lang.toUpperCase();$("btnConnect").textContent=l.connect;$("btnDisc").textContent=l.disc;$("btnSaveBud").textContent=l.save;$("btnStart").textContent=l.start;$("btnStop").textContent=l.stop;$("budgetIn").placeholder=l.budph;$("hint").textContent=l.ready;};const pingApi=async()=>{try{const r=await __fetchTO("/stats/index.json",{cache:"no-store"},2500);if(!r.ok) throw 0;const j=await r.json().catch(()=>null);setApi(true);return j}catch(e){setApi(false);return null}};const pickProxy=async()=>{for(const p of PROXIES){try{const r=await fetch(p.replace(/\/$/,"")+"/ping",{cache:"no-store"});if(r.ok){PROXY=p.replace(/\/$/,"");log("Proxy OK: "+PROXY,"oktxt");return}}catch(e){}}log("Proxy unavailable (ping failed)","badtxt");};const ensureConn=()=>{if(!window.solana||!window.solana.isPhantom){setPh(false,L().phno);return false}if(!st.conn) st.conn=new solanaWeb3.Connection(RPC,{commitment:"processed"});return true};const trunc=a=>a?String(a).slice(0,4)+"…"+String(a).slice(-4):"";const saveBudget=()=>{const v=String($("budgetIn").value||"").replace(",","."ამდ");const n=Number(v);if(!isFinite(n)||n<=0){alert(L().badamt);return}st.budget=n;localStorage.setItem("wolv_budget",String(n));log("Budget saved: "+n.toFixed(2)+" USDC","oktxt");updateButtons()};const loadBudget=()=>{const b=Number(localStorage.getItem("wolv_budget")||"0");if(isFinite(b)&&b>0){st.budget=b;$("budgetIn").value=String(b)}};
const rpc=async(method,params)=>{const r=await fetch(RPC,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method,params})});const j=await r.json();if(j.error) throw new Error(j.error.message||"rpc");return j.result};
const getUSDC=async(pub)=>{const res=await rpc("getParsedTokenAccountsByOwner",[pub,{programId:TOKEN_PROGRAM},{commitment:"processed"}]);let sum=0;for(const a of (res?.value||[])){const info=a?.account?.data?.parsed?.info;const mint=info?.mint;const ui=info?.tokenAmount?.uiAmount; if(mint===USDC_MINT) sum+=Number(ui||0)}return sum};
const refreshBalances=async()=>{if(!st.pub||!st.conn) return;try{const lam=await st.conn.getBalance(st.pub,"processed");const sol=lam/1e9;$("balSol").textContent=sol.toFixed(4);const usdc=await getUSDC(st.pub.toBase58());$("balUsdc").textContent=usdc.toFixed(2);st.lastUsdc=usdc;updateButtons()}catch(e){log("Balance refresh fail: "+(e?.message||e),"badtxt")}};
const connect=async()=>{if(!ensureConn()) return;try{const r=await window.solana.connect();const pk=r?.publicKey||window.solana.publicKey;if(!pk) throw 0;st.pub=pk;setPh(true,L().phok);$("btnConnect").disabled=true;$("btnDisc").disabled=false;await refreshBalances();log("Wallet: "+trunc(pk.toBase58()),"oktxt");updateButtons()}catch(e){setPh(false,L().phnc);log("Connect fail","badtxt")}};
const disconnect=async()=>{try{if(window.solana&&window.solana.isPhantom) await window.solana.disconnect()}catch(e){}st.pub=null;setPh(false,L().phnc);$("balSol").textContent="-";$("balUsdc").textContent="-";$("btnConnect").disabled=false;$("btnDisc").disabled=true;stop();updateButtons()};
const addTradeRow=(side,pair,qty,status,tx)=>{const tr=document.createElement("tr");const td=(t)=>{const x=document.createElement("td");x.textContent=t;return x};tr.appendChild(td(now()));tr.appendChild(td(side));tr.appendChild(td(pair));tr.appendChild(td(qty));tr.appendChild(td(status));const t=td(tx||"");tr.appendChild(t);$("tb").prepend(tr)};
const jupQuote=async(inputMint,outputMint,amount)=>{const url=PROXY+"/v6/quote?inputMint="+encodeURIComponent(inputMint)+"&outputMint="+encodeURIComponent(outputMint)+"&amount="+encodeURIComponent(String(amount))+"&slippageBps=80";const r=await fetch(url,{cache:"no-store"});if(!r.ok) throw new Error("quote "+r.status);return await r.json()};
const jupSwapTx=async(quote,userPublicKey)=>{const r=await fetch(PROXY+"/v6/swap",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({quoteResponse:quote,userPublicKey,wrapAndUnwrapSol:true,useSharedAccounts:true,prioritizationFeeLamports:"auto"})});if(!r.ok) throw new Error("swap "+r.status);return await r.json()};
const signAndSend=async(vtx)=>{const ph=window.solana;try{if(ph.signAndSendTransaction){const {signature}=await ph.signAndSendTransaction(vtx);return signature}const signed=await ph.signTransaction(vtx);const sig=await st.conn.sendRawTransaction(signed.serialize(),{skipPreflight:false,maxRetries:3});return sig}catch(e){throw e}};
const swapUSDCtoSOL=async(usdcAmount)=>{if(!st.pub) throw new Error("no wallet");const amt=Math.floor(usdcAmount*1e6);if(amt<=0) throw new Error("bad amt");addTradeRow("buy","SOL/USDC",usdcAmount.toFixed(2),"quote","");const q=await jupQuote(USDC_MINT,SOL_MINT,amt);addTradeRow("buy","SOL/USDC",usdcAmount.toFixed(2),"tx","");const sw=await jupSwapTx(q,st.pub.toBase58());const b64=sw?.swapTransaction; if(!b64) throw new Error("no tx");const buf=Uint8Array.from(atob(b64),c=>c.charCodeAt(0));let vtx;try{vtx=solanaWeb3.VersionedTransaction.deserialize(buf)}catch(e){vtx=solanaWeb3.Transaction.from(buf)}log(L().sig+"…");const sig=await signAndSend(vtx);addTradeRow("buy","SOL/USDC",usdcAmount.toFixed(2),"sent",sig);log("TX "+sig,"oktxt");return sig};
const remainingBudget=()=>Math.max(0,st.budget-st.spent);
const updateButtons=()=>{const ok=!!st.pub;const b=st.budget>0;const rem=remainingBudget();$("btnStart").disabled=!(ok&&b&&!st.run);$("btnStop").disabled=!st.run;};
const tick=async()=>{if(!st.run) return;try{await refreshBalances();const rem=remainingBudget();if(rem<=0.05){log(L().low,"badtxt");stop();return}const chunk=Math.min(5,rem);if(st.lastUsdc<chunk){log("Not enough USDC in wallet for chunk","badtxt");stop();return}log("DCA chunk: "+chunk.toFixed(2)+" USDC -> SOL");await swapUSDCtoSOL(chunk);st.spent+=chunk;localStorage.setItem("wolv_spent",String(st.spent));log("Spent: "+st.spent.toFixed(2)+" / "+st.budget.toFixed(2)+" USDC (rem "+remainingBudget().toFixed(2)+")","oktxt");if(remainingBudget()<=0.05){stop()}}catch(e){log("Tick fail: "+(e?.message||e),"badtxt");}};
const start=async()=>{if(!st.pub) return alert(L().need);if(!(st.budget>0)) return alert(L().nobud);if(!PROXY){await pickProxy()}st.mode=$("modeSel").value;localStorage.setItem("wolv_mode",st.mode);st.run=true;$("hint").textContent="RUNNING";log("START mode="+st.mode+" budget="+st.budget.toFixed(2),"oktxt");updateButtons();await tick();st.timer=setInterval(tick,30000)};
const stop=()=>{if(st.timer) clearInterval(st.timer);st.timer=null;st.run=false;$("hint").textContent=L().ready;log("STOP","badtxt");updateButtons()};
(async()=>{applyLang();loadBudget();st.spent=Number(localStorage.getItem("wolv_spent")||"0")||0;await pickProxy();await pingApi();setInterval(pingApi,15000);if(window.solana&&window.solana.isPhantom){try{await window.solana.connect({onlyIfTrusted:true});const pk=window.solana.publicKey;if(pk){st.pub=pk;ensureConn();setPh(true,L().phok);$("btnConnect").disabled=true;$("btnDisc").disabled=false;await refreshBalances();updateButtons()}}catch(e){setPh(false,L().phnc)}}else setPh(false,L().phno);$("btnConnect").onclick=connect;$("btnDisc").onclick=disconnect;$("btnSaveBud").onclick=saveBudget;$("btnStart").onclick=start;$("btnStop").onclick=stop;$("langBtn").onclick=()=>{st.lang=(st.lang==="en"?"fr":"en");localStorage.setItem("wolv_lang",st.lang);applyLang();setPh(!!st.pub,st.pub?L().phok:(window.solana&&window.solana.isPhantom?L().phnc:L().phno));};})();})()</script></body></html>
